/** @namespace Top-level namespace, vq **/(function(a,b){typeof exports=="object"&&a.require?module.exports=b(require("underscore"),require("d3"),require("jquery")):typeof define=="function"&&define.amd?define(["underscore","d3","jquery"],function(c,d,e){return b(c||a._,d||a.d3,e||a.$)}):b(_,d3,$)})(this,function(a,b,c){(a===undefined||a.VERSION===undefined)&&console.error("Underscore.js not detected.  Please check that is being loaded."),b===undefined&&console.error("d3.js not detected.  Please check it is being loaded."),vq={},vq.VERSION="2.0",vq.Base=function(){this.$properties={}},vq.Base.prototype.properties={},vq.Base.cast={},vq.Base.prototype.extend=function(a){return this},vq.Base.prototype.property=function(a,b){this.hasOwnProperty("properties")||(this.properties=vq.extend(this.properties)),this.properties[a]=!0,vq.Base.prototype.propertyMethod(a,vq.Base.cast[a]=b);return this},vq.Base.prototype.propertyValue=function(a,b){var c=this.$properties;c[a]=b;return b},vq.Base.prototype.propertyMethod=function(a,b){b||(b=vq.Base.cast[a]),this[a]=function(c){if(arguments.length){var d=typeof c=="function";this.propertyValue(a,d&1&&b?function(){var a=c.apply(this,arguments);return a!=null?b(a):null}:c!=null&&b?b(c):c).type=d;return this}return this.$properties[a]!=null?typeof this.$properties[a]=="function"&1?this.$properties[a].apply(this):this.$properties[a]:null}},vq.extend=function(a){function b(){}b.prototype=a.prototype||a;return new b},vq.Vis=function(){vq.Base.call(this)},vq.Vis.prototype=vq.extend(vq.Base),vq.Vis.prototype.property("vertical_padding",Number).property("horizontal_padding",Number).property("width",Number).property("height",Number).property("container",function(a){return vq.utils.VisUtils.divify(a)}),vq.models={},vq.models.VisData=function(a){a.DATATYPE!=null?this.DATATYPE=a.DATATYPE:this.DATATYPE="VisData",a.CONTENTS!=null&&(this.CONTENTS=a.CONTENTS),this._ready=!1},vq.models.VisData.prototype.getDataType=function(){return this.DATATYPE},vq.models.VisData.prototype.getContents=function(){return this.CONTENTS},vq.models.VisData.prototype.get=function(a){var b=a.split("."),c=this;for(var d=0;d<b.length-1;d++){var e=b[d];c[e]===undefined&&(c[e]={}),c=c[e]}e=b[b.length-1];return c[e]===undefined?undefined:c[e]},vq.models.VisData.prototype.set=function(a,b){var c=a.split("."),d=this;for(var e=0;e<c.length-1;e++){var f=c[e];d[f]===undefined&&(d[f]={}),d=d[f]}f=c[c.length-1],d[f]=b===undefined?null:b;return this},vq.models.VisData.prototype.isDataReady=function(){return this._ready},vq.models.VisData.prototype.setDataReady=function(a){this._ready=Boolean(a)},vq.models.VisData.prototype.setValue=function(a,b){var c=vq.utils.VisUtils.get;if(typeof c(a,b.id)=="function")this.set(b.label,c(a,b.id));else{if(b.cast){this.set(b.label,b.cast(c(a,b.id)));return}this.set(b.label,c(a,b.id));return}},vq.models.VisData.prototype._processData=function(a){var b=this,c=vq.utils.VisUtils.get;this.hasOwnProperty("_dataModel")||(this._dataModel=vq.extend(this._dataModel)),a=Object(a),this._dataModel.forEach(function(d){try{if(!typeof d=="object")return;if(!d.optional)c(a,d.id)===undefined?b.set(d.label,d.defaultValue!=undefined?d.defaultValue:d.cast(null)):b.setValue(a,d);else{if(c(a,d.id)===undefined)return;b.setValue(a,d)}}catch(e){console.warn('Unable to import property "'+d.id+'": '+e)}})},vq.utils={},vq.utils.VisUtils={},vq.utils.VisUtils.divify=function(a){var b=null;if(typeof a=="string")b=document.getElementById(a)===undefined?null:a;else if(typeof a=="function"){var c=a.call()+"";b=document.getElementById(c)===undefined?null:c}return b},vq.utils.VisUtils.createDiv=function(a,b,c){var d;try{d=document.createElement("<div>")}catch(e){}if(!d||!d.name)d=document.createElement("div");a&&(d.id=a),b&&(d.className=b,d.setAttribute("className",b)),c&&(d.innerHTML=c);return d},vq.utils.VisUtils.clone=function(a){if(!a||"object"!=typeof a)return a;var b="[object Array]"===Object.prototype.toString.call(a)?[]:{},c,d;for(c in a)a.hasOwnProperty(c)&&(d=a[c],d&&"object"==typeof d?b[c]=vq.utils.VisUtils.clone(d):b[c]=d);return b},vq.utils.VisUtils.get=function(a,b){var c=b.split(".");for(var d=0;d<c.length-1;d++){var e=c[d];a[e]===undefined&&(a[e]={}),a=a[e]}e=c[c.length-1];return a[e]===undefined?undefined:a[e]},vq.utils.VisUtils.set=function(a,b,c){var d=b.split(".");for(var e=0;e<d.length-1;e++){var f=d[e];a[f]===undefined&&(a[f]={}),a=a[f]}f=d[d.length-1],a[f]=c||null;return this},vq.utils.VisUtils.natural_order=function(a,b){return a-b},vq.utils.VisUtils.alphanumeric=function(a,b){return isNaN(a||b)?isNaN(b||a)?[a,b].sort():1:isNaN(b||a)?-1:Number(a)-Number(b)},vq.utils.VisUtils.network_node_id=function(a){var b=vq.utils.VisUtils.options_map(a);if(b!=null&&b.label!=undefined)return b.label;return a.nodeName+a.start.toFixed(2)+a.end.toFixed(2)},vq.utils.VisUtils.network_node_title=function(a){var b=vq.utils.VisUtils.options_map(a);if(b!=null&&b.label!=undefined)return b.label+" \n"+"Chr: "+a.nodeName+"\nStart: "+a.start+"\nEnd: "+a.end;return a.nodeName+" "+a.start.toFixed(2)+" "+a.end.toFixed(2)},vq.utils.VisUtils.tick_node_id=function(a){return a.value},vq.utils.VisUtils.extend=function(a,b){for(var c in b)a[c]=b[c];return a},vq.utils.VisUtils.parse_pairs=function(a,b,c){var d={},e=[],f=[];e=[],f=a.split(c);for(var g=0;g<f.length;g++)e=f[g].split(b),e.length==2&&(d[e[0]]=e[1]);return d},vq.utils.VisUtils.options_map=function(a){var b={};a.options!=null&&(b=vq.utils.VisUtils.parse_pairs(a.options,"=",","));return b},vq.utils.VisUtils.wrapProperty=function(a){return typeof a=="function"?a:function(){return a}},vq.utils.VisUtils.layoutChrTiles=function(b,c,d,e){var f=e||Boolean(!1),g=[],h=[];h=a.uniq(a.pluck(b,"chr")),h.forEach(function(e){g=a.union(g,vq.utils.VisUtils.layoutTiles(a.where(b,{chr:e}),c,d,f))});return g},vq.utils.VisUtils.layoutChrTicks=function(a,b,c){return vq.utils.VisUtils.layoutChrTiles(a,b,c,!0)},vq.utils.VisUtils.layoutTiles=function(b,c,d,e){var f=e||Boolean(!1),g=Array(b.length);g=a.map(b,function(b){return a.extend({},b,{tile_length:b.end-b.start})}),g=g.sort(function(a,b){return a.tile_length<b.tile_length?-1:a.tile_length>b.tile_length?1:a.start<b.start?-1:1}).reverse(),g.length&&(g[0].level=0),a.each(g,function(a,b,f){vq.utils.VisUtils.layoutTile(a,b,f,c,d,e)});return g},vq.utils.VisUtils.layoutTile=function(b,c,d,e,f,g){var h=g||Boolean(!1),i=d.slice(0,c).map(function(c){var d=vq.utils.VisUtils.extend({},c);a.isNull(c.end)?d.end=b.start+.1:a.isNull(b.end)&&(b.end=b.start+.1);return vq.utils.VisUtils._isOverlapping(d,b,e||0,h)?c.level:null});i=a.filter(i,function(b){return a.isFinite(b)}).sort(vq.utils.VisUtils.natural_order);var j=0,k=0;while(j>=i[k])j==i[k]&&j++,k++;a.isUndefined(f)?b.level=j:b.level=j<=f?j:Math.floor(Math.random()*(f+1))},vq.utils.VisUtils._isOverlapping=function(a,b,c,d){var e=d||Boolean(!1);return e?a.start-c<=b.start&&a.start+c>=b.start:a.start-c<=b.end&&a.end+c>=b.start},vq.utils.VisUtils.tileCenter=function(b){if(!a.isFinite(b.end+b.start)&&a.isNumber(b.start))return b.start;return b.end+b.start>>>1},vq.utils.VisUtils.cumulativeOffset=function(a){var b=0,c=0;if(a.parentNode)do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return{left:c,top:b}},vq.utils.VisUtils.viewportOffset=function(a){var b=0,c=0,d=document.body,e=a;do{b+=e.offsetTop||0,c+=e.offsetLeft||0;if(e.offsetParent==d&&e.style.position=="absolute")break}while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return{left:c,top:b}},vq.utils.VisUtils.scrollOffset=function(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0;while(a=a.parentNode);return{left:c,top:b}},vq.utils.VisUtils.outerHTML=function(a){return a.outerHTML||function(a){var b=document.createElement("div"),c;b.appendChild(a.cloneNode(!0)),c=b.innerHTML,b=null;return c}(a)},vq.utils.VisUtils.translateToReferenceCoord=function(a,b){var c=vq.utils.VisUtils.scrollOffset(b.root.canvas());return{x:a.x+c.left,y:a.y+c.top}},vq.utils.VisUtils.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)})},vq.utils.VisUtils.openBrowserTab=function(a){var b=window.open(a,"_blank");b.focus()},vq.utils.VisUtils.disabler=function(a){a.preventDefault&&a.preventDefault();return!1},c.fn.disableSelection=function(){return this.each(function(){c(this).attr("unselectable","on").css({"-moz-user-select":"none","-o-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}).each(function(){c(this).attr("unselectable","on").bind("selectstart",function(){return!1})})})},vq.utils.VisUtils.enableSelect=function(a){a.attachEvent?a.detachEvent("onselectstart",vq.utils.VisUtils.disabler):a.removeEventListener("selectstart",vq.utils.VisUtils.disabler,!1)},vq.utils.VisUtils.insertGCFCode=function(){document.write(' \n<!--[if lt IE 9]> \n    <script type="text/javascript" \n     src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script> \n    <style> \n     .chromeFrameInstallDefaultStyle { \n       width: 100%;  \n       border: 5px solid blue; \n     } \n    </style> \n            <div id="notice"></div> \n            <div id="prompt"></div> \n    <script> \n          function displayGCFText() { \n            document.getElementById("notice").innerHTML = "Internet Explorer has been detected." + \n            "Please install the Google Chrome Frame if it is not already installed.  This will enable" + \n            "HTML5 features necessary for the web application.<p>"+ \n            "If the install panel does not appear, please enable Compatibility mode in your browser and reload this page."; \n            }; \n     window.attachEvent("onload", function() { \n       CFInstall.check({ \n         mode: "inline",  \n         node: "prompt" \n       }); \n     }); \n    </script> \n  <![endif]-->')},vq.utils.GoogleDSUtils={},vq.utils.GoogleDSUtils.dataTableToArray=function(a){var b=a,c=[],d=[],e=[];if(b==null)return[];for(col=0;col<b.getNumberOfColumns();col++)d.push(b.getColumnLabel(col)),e.push(b.getColumnType(col));for(row=0;row<b.getNumberOfRows();row++){var f={};for(col=0;col<b.getNumberOfColumns();col++)e[col].toLowerCase()=="number"?f[d[col]]=b.getValue(row,col):f[d[col]]=b.getFormattedValue(row,col);c.push(f)}return c},vq.utils.GoogleDSUtils.dataTableToNetworkArray=function(a){var b=this.dataTableToArray(a);return b.map(function(a){return{node1:{chr:a.chr1,start:a.start1,end:a.end1,value:a.value1,options:a.options1},node2:{chr:a.chr2,start:a.start2,end:a.end2,value:a.value2,options:a.options2},linkValue:a.linkValue}})},vq.utils.GoogleDSUtils.getColIndexByLabel=function(a,b){for(col=0;col<a.getNumberOfColumns();col++)if(b.toLowerCase()==a.getColumnLabel(col).toLowerCase())return col;return-1},vq.utils.SyncDatasources=function(a,b,c,d,e){a&&!isNaN(a)?this.timeout=a:this.timeout=200,b&&!isNaN(b)?this.num_checks_until_quit=b:this.num_checks_until_quit=20;if(d instanceof Object)this.args=d;else{console.log("Error: variable array not passed to timer initialize method.");return}if(c instanceof Function)this.success_callback=c;else{console.log("Error: callback function not passed to timer initialize method.");return}e instanceof Function&&(this.fail_callback=e),this.num_checks_so_far=0},vq.utils.SyncDatasources.prototype.start_poll=function(){var a=this;setTimeout(function(){a.poll_args()},a.timeout)},vq.utils.SyncDatasources.prototype.check_args=function(){var a=!0;for(arg in this.args)this.args[arg]==null&&(a=!1);return a},vq.utils.SyncDatasources.prototype.poll_args=function(){var a=this;if(this.check_args()){this.success_callback.apply();return!1}this.num_checks_so_far++;if(this.num_checks_so_far>=this.num_checks_until_quit){console.log("Maximum number of polling events reached.  Datasets not loaded.  Aborting.");if(this.fail_callback===undefined)return!1;this.fail_callback.apply();return!1}setTimeout(function(){a.poll_args()},a.timeout)},vq.sum=function(b,c){return typeof c=="function"?a.reduce(b,function(a,b,d){return a+c.call({},b,d)},0):typeof c=="string"?a.reduce(b,function(a,b){return a[c]+b[c]},0):a.reduce(b,function(a,b){return a+b},0)},function(a){var b={version:"1.9.1"};b.stats={},b.stats.mean=function(a){var b=a.length;if(b===0)return NaN;var c=0,d=-1;while(++d<b)c+=(a[d]-c)/(d+1);return c},b.stats.variance=function(a){var c=a.length;if(c<1)return NaN;if(c===1)return 0;var d=b.stats.mean(a),e=-1,f=0;while(++e<c){var g=a[e]-d;f+=g*g}return f/(c-1)},b.stats.median=function(a){return b.stats.quantiles(a,[.5])[0]},b.stats.mode=function(a){a=a.slice().sort(b.ascending);var c,d=a.length,e=-1,f=e,g=null,h=0,i,j;while(++e<d)(j=a[e])!==g&&((i=e-f)>h&&(h=i,c=g),g=j,f=e);return c},b.stats.quantiles=function(a,c){a=a.slice().sort(b.ascending);var d=a.length-1;return c.map(function(b){if(b===0)return a[0];if(b===1)return a[d];var c=1+b*d,e=Math.floor(c),f=c-e,g=a[e-1];return f===0?g:g+f*(a[e]-g)})},b.ascending=function(a,b){return a-b},a.science=b}(vq),vq.events={},vq.events.Event=function(a,b,c){this.id=a||"",this.source=b||null,this.obj=c||{}},vq.events.Event.prototype.dispatch=function(){vq.events.Dispatcher.dispatch(this)},vq.events.Dispatcher=function(){var a={};return{addListener:function(b){var c,d;if(!(b===undefined||arguments.length<2)){if(arguments.length==2&&typeof arguments[1]=="function")d=arguments[1],c=null;else if(arguments.length==3&&typeof arguments[1]=="string")c=arguments[1],d=arguments[2];else return;a[b]===undefined&&(a[b]={}),a[b][c]===undefined&&(a[b][c]=[]),a[b][c].push(d)}},removeListener:function(b){var c,d;if(!(b===undefined||arguments.length<2)){if(arguments.length==2&&typeof arguments[1]=="function")d=arguments[1],c=null;else if(arguments.length==3&&typeof arguments[1]=="string")c=arguments[1],d=arguments[2];else return;if(a[b]===undefined||a[b][c]===undefined)return;a[b][c].forEach(function(e,f){e===d&&a[b][c].splice(f,1)})}},dispatch:function(b){var c=b.source||null,d=b.id||null,e=null,f=null;if(d!=null&&a[d]!==undefined){if(a[d][c]!==undefined){e=a[d][c].length;while(e--)f=a[d][c][e],f.call(b,b.obj)}if(a[d][null]!==undefined){e=a[d][null].length;while(e--)f=a[d][null][e],f.call(b,b.obj)}}}}}(),vq.Hovercard=function(a){this.id=vq.utils.VisUtils.guid(),this.hovercard=document.createElement("div",this.id),c(this.hovercard).addClass("hovercard"),this.lock_display=!1,a&&(this.timeout=a.timeout||800,this.target_mark=a.target||null,this.data_config=a.data_config||null,this.tool_config=a.tool_config||null,this.self_hover=a.self_hover||!0,this.offset=a.offset||{top:0,left:0},this.include_footer=a.include_footer!=null?a.include_footer:this.self_hover||!1,this.include_header=a.include_header!=null?a.include_header:this.self_hover||!0,this.include_frame=a.include_frame!=null?a.include_frame:!1)},vq.Hovercard.prototype.show=function(a,b){var d=this;if(!a)throw"vq.Hovercard.show: target div not found.";this.target=a,c("<div></div>").addClass("data").html(this.renderCard(b)).appendTo(d.hovercard),this.tool_config&&c("<div></div>").addClass("links").html(this.renderTools(b)).appendTo(d.hovercard),this.include_footer&&c(this.hovercard).append(this.renderFooter()),this.placeInDocument(),this.start=function(){d.startOutTimer()},this.cancel=function(){c(d.target_mark).off("mouseout",d.start,!1),d.cancelOutTimer()},this.close=function(){d.destroy()},c(this.target_mark).on("mouseout",d.start),c(this.getContainer()).on("mouseover",d.cancel),c(this.getContainer()).on("mouseout",d.start)},vq.Hovercard.prototype.startOutTimer=function(a){var b=this,c=a||b.timeout;this.outtimer_id||(this.outtimer_id=window.setTimeout(function(){b.trigger()},c))},vq.Hovercard.prototype.cancelOutTimer=function(){this.outtimer_id&&(window.clearTimeout(this.outtimer_id),this.outtimer_id=null)},vq.Hovercard.prototype.trigger=function(){this.outtimer_id&&(window.clearTimeout(this.outtimer_id),this.outtimer_id=null,this.destroy());return!1},vq.Hovercard.prototype.togglePin=function(){this.lock_display=!this.lock_display||!1;var a=this;c(this.getContainer()).hasClass("pinned")?c(this.getContainer()).on("mouseout",a.start).removeClass("pinned"):(c(this.target_mark).off("mouseout",a.start),c(this.getContainer()).off("mouseout",a.start),this.cancelOutTimer(),c(this.getContainer()).addClass("pinned"))},vq.Hovercard.prototype.placeInDocument=function(){var a=this.hovercard,b=this.target,d=c(b).offset();a.style.display="block",c("body").append(a),c(a).offset({top:d.top,left:d.left+c(a).outerWidth()>c("body").outerWidth()?d.left-c(a).outerWidth():d.left}),this.include_frame&&(this.frame=this.renderFrame(),c(a).prepend(this.frame),this.attachMoveListener()),c(a).show()},vq.Hovercard.prototype.hide=function(){(!this.self_hover||!this.over_self)&&c(this.hovercard).hide()},vq.Hovercard.prototype.destroy=function(){this.hide(),this.target_mark.removeEventListener("mouseout",this.start,!1),this.getContainer().removeEventListener("mouseout",this.start,!1),this.cancelOutTimer(),this.getContainer().parentNode==document.body&&document.body.removeChild(this.getContainer())},vq.Hovercard.prototype.isHidden=function(){return c(this.hovercard).is(":hidden")},vq.Hovercard.prototype.renderCard=function(a){return this.renderData(a)},vq.Hovercard.prototype.attachMoveListener=function(){function g(e){var f=e?e:window.event,g=f.clientX?f.clientX:f.pageX,h=f.clientY?f.clientY:f.pageY;c(a.hovercard).offset({left:d.left+(g-b.left),top:d.top+(h-b.top)})}function f(){c(window).off("mousemove",g),c(window).off("selectstart",vq.utils.VisUtils.disabler),c(a.getContainer()).hasClass("pinned")||c(a.getContainer()).on("mouseout",a.start),b={}}function e(e){var f=e?e:window.event;c(a.getContainer()).hasClass("temp")&&c(a.getContainer()).off("mouseout",a.start),c(window).on("mousemove",g),d=vq.utils.VisUtils.cumulativeOffset(a.hovercard),b.top=f.clientY?f.clientY:f.pageY,b.left=f.clientX?f.clientX:f.pageX,c(window).on("selectstart",vq.utils.VisUtils.disabler)}var a=this,b={},d={};c(this.move_div).on("mousedown",e),c(this.move_div).on("mouseup",f),c(window).on("mouseup",f)},vq.Hovercard.prototype.renderFrame=function(){function d(){a.togglePin();return!1}var a=this,b=document.createElement("div");c(b).addClass("tools"),this.move_div=document.createElement("span"),c(this.move_div).addClass("move").attr("title","Drag to move").html('<i class="icon-move"></i>').appendTo(b),this.pin_div=document.createElement("span"),c(this.pin_div).addClass("pin").attr("title","Click to pin").html('<i class="icon-pushpin"></i>').on("click",d).appendTo(b);return b},vq.Hovercard.prototype.renderTools=function(b){var d=this,e=vq.utils.VisUtils.get,f=document.createElement("table"),g=document.createElement("tbody");c(f).append(g);if(this.tool_config)for(var h in this.tool_config)try{if(!this.tool_config.hasOwnProperty(h))continue;var i=document.createElement("a"),j=this.tool_config[h].href;if(a.isFunction(j)&&j(b))i.setAttribute("href",j(b));else if(!a.isFunction(j)&&j)i.setAttribute("href",j);else continue;c(i).on("click",function(){c(d.getContainer()).off("mouseover",d.cancel),d.startOutTimer(1e3)}),c(i).html(h);if(this.tool_config[h].key){var k=document.createElement("i");c(k).addClass("icon-"+this.tool_config[h].key),c(i).prepend(k)}var l=g.insertRow(-1),m=l.insertCell(-1);c(m).append(i)}catch(n){console.warn("Data not found for tools in tooltip. "+n)}return f},vq.Hovercard.prototype.renderData=function(b){var c=vq.utils.VisUtils.get,d=document.createElement("table");if(typeof b=="object"){if(this.include_header){var e=d.createTHead(),f=e.insertRow(-1),g=f.insertCell(-1);g.innerHTML="Property",g=f.insertCell(-1),g.innerHTML="Value"}var h=document.createElement("tbody");d.appendChild(h);if(this.data_config)for(var i in this.data_config)try{if(!this.data_config.hasOwnProperty(i))continue;var j=h.insertRow(-1),k=j.insertCell(-1);k.innerHTML="<b>"+i+"</b>:",k.style.textAlign="right",k=j.insertCell(-1),typeof this.data_config[i]=="function"?k.innerHTML="<span>"+this.data_config[i](b)+"</span>":k.innerHTML="<span>"+c(b,this.data_config[i])+"</span>"}catch(l){console.warn("Data not found for tool tip: "+l)}else a.keys(b).forEach(function(a){try{var d=h.insertRow(-1),e=d.insertCell(-1);e.innerHTML="<b>"+a+"</b>:",e=d.insertCell(-1),e.innerHTML="<span>"+c(b,a)+"</span>"}catch(f){console.warn("Data not found for tool tip: "+f)}})}else if(typeof b=="string")return b;return d},vq.Hovercard.prototype.getContainer=function(){return this.hovercard},vq.Hovercard.prototype.renderFooter=function(){function e(){a.destroy();return!1}var a=this,b=document.createElement("div");c(b).addClass("footer");var d=document.createElement("span");c(d).on("click",e),c("<i></i>").addClass("icon-remove").html("").appendTo(d),c(b).append(d);return b},vq.hovercard=function(a){function g(g){var h=this,i=b.select(this),j=a.param_data?g:i.datum(),k=b.event.pageX,l=b.event.pageY;a.canvas_id=a.canvas_id||c("div svg").get(0),a.self_hover=!0,a.include_frame=!0,a.include_footer=!0,a.target=h;var m=c("#"+a.canvas_id).first().parent(),n=a.canvas_id||m.attr("id")||"fixme";if(!c("#"+n+"_rel").length){m.prepend("<div id="+n+"_rel></div>");var o=c("#"+n+"_rel");o.css({position:"relative",top:"0px",zIndex:"-1"})}else o=c("#"+n+"_rel");c("#"+f).length||c("<div id="+f+"></div>").appendTo(o).css({position:"absolute",zIndex:"-1"}),e=c("#"+f).get(0),c(e).offset({left:k,top:l}),d=new vq.Hovercard(a),d.show(e,j)}var d,e,f="vq_hover";return g};return vq})