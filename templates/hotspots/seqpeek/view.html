{% load static from staticfiles %}

<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>Multiscale Mutation Hotspots</title>
    <link type="text/css" rel="stylesheet" href="{% static 'css/main.css' %}" />

    <script type="text/javascript" src="{% static 'js/vendor/jquery-1.11.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/vendor/d3.min.js' %}"></script>

    <script type="text/javascript" src="{% static 'js/vendor/underscore.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/vendor/require.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/seqpeek_view/seqpeek_view.js' %}"></script>
</head>
<body>
    {% if plot_data %}
        <h2>SeqPeek {{ plot_data.gene_label}}</h2>
    {% else %}
        <h2>SeqPeek</h2>
    {% endif %}

    {% if plot_data %}
        <button class="btn btn-primary space-bottom-10" id="seqpeek_selection_toggle">Toggle Select</button>
        <div>
            Number of unique selected samples: <label id="number_selected_samples">0</label>
        </div>
        <table id="seqpeek-table">
            <thead>
            <tr>
                <th>Tumor Type</th>
                <th>Samples (#)</th>
                <th style="text-align: center;">
                    <canvas id="seqpeek-mini-locator" width="400" height="24"></canvas>
                    <svg height="24">
                        <rect x="5" y="1" height="21" width="10" style="stroke: red; fill-opacity: 0.0;"></rect>
                        <text x="20" y="15" font-size="10">current view</text>
                        <rect x="85" y="7" height="10" width="30" style="fill: rgb(170,170,170); stroke-opacity: 0.0;"></rect>
                        <text x="120" y="15" font-size="10">whole protein</text>
                    </svg>
                </th>
            </tr>
            </thead>
            <tbody>
            {% for track in plot_data.tracks %}
                <tr>
                    <td>{{ track.label }}</td>
                    <td>{{ track.statistics.samples.numberOf }}</td>
                    <td id="{{ track.render_info.row_id }}"></td>
                </tr>
            {% endfor %}
            <tr>
                <td></td>
                <td></td>
                <td id="seqpeek-tick-element"></td>
            </tr>
            </tbody>
        </table>
        <script type="text/javascript">
            __data_bundle = {{ data_bundle|safe }};
        </script>
    {% endif %}
</body>
